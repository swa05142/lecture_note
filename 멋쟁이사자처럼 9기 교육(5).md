### 제 26장 : MTV 패턴

#### MTV 패턴 이해하기

python manage.py runserver  : 서버 구동



MTV : Model Template View

Template : 사용자가 보이는 영역, HTML, CSS, 템플릿언어

Model : DataBase(DB)

View : 데이터를 처리하는 곳 MTV중에서 핵심



### 제 27장: 실습[1]

#### App 이란?

Django프로젝트를 이루는 작은 단위

App 생성 명령어 : python manage.py startapp firstapp

App 등록 : firstproject - firstproject - settings.py - INSTALLED_APPS - 명령어 : 'firstapp.apps.Firstappconfig', - 저장



#### 웹사이트 구동 순서

1. 사용자가 서버에 요청
2. 서버의 view는 model에게 요청에 필요한 데이터를 받음
3. view는 받은 데이터를 적절하게 처리해서 template로 넘김
4. template은 받은 정보를 사용자에게 보여줌



만든 템플릿(welcome.html)

```html
<div style="text-align: center;">
    <h1>사용자의 이름을 입력해주세요</h1>
    <br>
    <form action="">
        <label for="nameInput">이름 :</label>
        <input id = "nameInput" name="name">
        <input type="submit" value="제출">
    </form>
</div>
```

만든 템플릿(hello.html)

```html
<div style="text-align: center;">
    <h1>사용자의 이름을 입력해주세요</h1>
    <br>
    <form action="hello">
        <label for="nameInput">이름 :</label>
        <input id = "nameInput" name="name">
        <input type="submit" value="제출">
    </form>
</div>
```

만든 view

```python
def welcome(request):
    return render(request,"welcome.html")

def hello(request):
    userName = request.GET['name']
    return render(request, "hello.html",{'userName' : userName})
```

urls.py

```python
from firstapp import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('',views.welcome, name="welcome"),
    path('hello/',views.hello, name="hello"),
]
```



### 제 28장: 실습[2]

#### 앱 제작 순서

1. App을 생성
2. Template 제작
3. View 제작
4. URL 연결



#### 템플릿 언어

{%for word in wordDict %}



{%endfor%}



### 제 29장 : Git 사용법

+ git init 

현재 디렉터리를 새로운 깃저장소로 초기화

+ git add

staging area에 파일 저장  git add . 모든 파일 올림

+ git commit -m "first commit"

staging area 올린 파일 저장 

+ git ignore

사용자의 정보와 같이 공개하면 안되는 파일을 걸러주는 필터 역할

+ git branch -M main

master 브랜치 이름을 main으로

+ git branch "이름"

이름 브랜치 생성

+ git checkout 이름

이름 브랜치로 이동

+ git push
+ commit된 파일들을 github에 저장



### 제 30장 : Django와 데이터베이스

wordcount는 웹사이트 종료시 데이터 삭제

+ 데이터 저장을 위해 데이터베이스 사용

ORM(Object Relation Mapping)

+ sql 대신 파이썬만으로 데이터베이스를 조작, 정의, 제어하는 기법

객체 지향

+ 프로그램의 각 기능을 함수로 만들어 모듈화 하는 것



#### 데이터 베이스

+ 공유 데이터의 집합
+ row, column으로 구성
+ Django에서는 데이터베이스를 클래스로 표현
  + 클래스의 이름은 테이블의 이름
  + 각 속성을 클래스의 필드로 정의함



```
class Blog:
	id = 숫자
	제목 = 문자
	본문 = 문자
	생성날짜 = 날짜
	글쓴이 = 문자
```



### 제 31 장 : Model 실습

| Html위젯      | 필드타입      | 필수옵션    | 설명                                             |
| ------------- | ------------- | ----------- | ------------------------------------------------ |
| Checkboxinput | BooleanField  |             | True/False                                       |
| Textinput     | CharField     | max_lenghth | 문자열 데이터 저장필드, 최대 글자수 지정 필요    |
| Textinput     | DateField     |             | 날짜 데이터 저장 필드                            |
| Textinput     | DateRimeField |             | 날짜와 시간데이터를 저장하는 필드                |
| Numberinput   | FloatField    |             | float과 같은 실수데이터를 저장하는 필드          |
| Numberinput   | TextField     |             | integer와 같은 정수데이터를 저장하는 필드        |
| Textarea      | intergerFied  |             | 글자수 제한이 없는 문자열 데이터를 저장하는 필드 |

python manage.py makemigrations

+ models.py의 변경 사항 앱 내의 migrations 폴더에 저장

python manage.py migrate

+ migration 폴더를 실행시켜 데이터베이스에 적용

superuser 등록

+ python manage.py createsuperuser
+ models.py에 admin.site.register('models 이름')으로 superuser 등록



### 제 32 장~ 제 35장 : CRUD

#### CRUD란?

CRUD 란 Create(생성), Read(읽기), Update(갱신), Delete(삭제)의 줄임말로써 대부분의 소프트웨어가 기본적으로 데이터베이스를 처리하는 구조이다.

일반적으로 게시판을 예로 들면 글 쓰기, 글 읽기, 글 수정, 글 삭제 등이 이에 속한다.

#### read

```
models.py
class Designer(models.Model): #모델명의 첫글자는 대문자로
    image = models.ImageField(upload_to= 'images/') #이미지를 다루기 위해 pillow설치
    name = models.CharField(max_length = 50) #최대로 넣을 수 있는 글자 수
    address = models.CharField(max_length = 255)
    description = models.TextField()
    
html
<form action="{% url 'create' %}" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
  <input type="file" id="inputFile" name="image">
  <input type="text" id="inputName" name="name">
  <input type="text" id="inputAddress" name="address">
  <textarea id="inputDescription" name="description" cols="40" rows="10"></textarea>
       
  <button type="submit">등록 완료하기</button>
</form>
```



#### Create

새로운 객체를 생성해 data 저장

1. 객체 생성

```python
if request.method == 'POST':
        <객체_변수> = <model 이름>()
```



2. 입력 data 저장

```python
post.image = request.FILES['image']
post.name = request.POST['name']
post.address = request.POST['address']
post.description = request.POST['description']
post.save()
```



#### Update

1. update 클래스

```python
def update(request,id):
    update_blog = Blog.objects.get(id=id)
    update_blog.title = request.Post['title']
    update_blog.writer = request.Post['writer']
    update_blog.body = request.Post['body']
    update_blog.pub_date = timezone.now()
    return redirect('detail',update_blog.id)
```



#### Delete

1. delete 클래스

```
view.py
def delete(request,id):
       delete_blog = Blog.objects.get(id=id)
       delete_blog.delete() #삭제 메소드
       return redirect('home')
```

2. url. py

```
urls.py
path('delete/str:Lid',delete, name="delete")
```

3. detail.html

```
detail.html
<a href="{% url 'delete' blog.id%}"></a>
```

